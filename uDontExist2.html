<html>
<head>
<title>Rumors & Thoughts</title>
<script src="responsivenessHandler.js"></script>
<script src="uDontExistScript.js"></script>
<link rel="stylesheet" href="uDontExistStyles.css">
<link href="https://fonts.googleapis.com/css2?family=Special+Elite&family=UnifrakturMaguntia&family=Nosifer&family=Fredericka+the+Great&family=Pirata+One&display=swap" rel="stylesheet">
</head>
<audio id="soundtrack2" src="sounds/5. The Amicable Apparition.wav" preload="auto" loop></audio>
<body style="transition: all 1s ease-in-out; font-family: 'Special Elite', monospace; background-image: none; background-color: rgb(255, 255, 255);">
    <div id="calm-container" style="text-align: center; margin-top: 50px;">
    <p id="calm-instruction" style="font-size: 1.5rem; transition: opacity 0.5s ease-in-out; opacity: 0; color: white; text-shadow: 0 0 5px rgba(139, 0, 0, 0.5);">
        Press <span style="font-weight: bold; color: red;">Enter</span> to help Elliot calm down.
    </p>
    <br>
<br>
<br>
    <div id="animation-container" style="font-size: 2rem; transition: opacity 1s ease-in-out; width: 70vw; text-transform: uppercase; color: red; text-shadow: 0 0 10px black; animation: vibrate 0.2s infinite;">
        So... this is what they've been saying about me? <br>All their whispers, their lies, their truths...
    </div>
    <br>
<br>
<br>
<p id="calm-message" style="font-size: 1.5rem; transition: opacity 0.5s ease-in-out; opacity: 0; color: white; text-shadow: 0 0 5px rgba(139, 0, 0, 0.5);">
    Elliot is calm now. Thank you for your help.
</p>
</div>
<button id="next-button" style="text-shadow: 0 0 5px rgba(139, 0, 0, 0.5); font-family: 'Special Elite', monospace; text-shadow: 0 0 5px rgba(139, 0, 0, 0.5);" onclick="goNext2()">→</button>
<!-- Back arrow button -->
<button id="back-button" style="text-shadow: 0 0 5px rgba(139, 0, 0, 0.5); font-family: 'Special Elite', monospace;" onclick="goBack2()">←</button>

<audio src="8bit.mp3" autoplay loop></audio>
<script>

// const soundTrack2 = document.getElementById('soundtrack2');
//     function stopSound(sound) {
//             sound.pause();
//             sound.currentTime = 0;
//     }
//     function playSound(sound) {
//         if (sound.paused) {
//             sound.currentTime = 0;
//             sound.play();
//         }
//     }
//     playSound(soundTrack2);
    
    let isCalm = false; // Track if Elliot is calm
const animationContainer = document.getElementById("animation-container");
const calmInstruction = document.getElementById("calm-instruction");

// Generate a random number of presses required (between 1 and 10)
let pressesRequired = Math.floor(Math.random() * 10) + 2;
let currentPresses = 0; // Track the number of presses 

setTimeout(() => {
    calmInstruction.style.opacity = "1";
            }, 1000); 
// Listen for key presses
document.addEventListener("keydown", (event) => {
    if (event.code === "Enter" && !isCalm) { // Check if the Enter key is pressed
        currentPresses++; // Increment the press count

        // Add pulse animation to the instruction text
        calmInstruction.classList.add("pulse");
        setTimeout(() => calmInstruction.classList.remove("pulse"), 300); // Remove the animation after 300ms

        // Change the instruction text after the first press
        if (currentPresses === 1) {
            calmInstruction.textContent = "Keep going! Press Enter again..";
        }

        if (currentPresses >= pressesRequired) {
            // Stop the animation and show the calming message
            animationContainer.style.textTransform = "none"; // Stop the animation
            animationContainer.style.animation = "none"; // Stop the animation
            calmInstruction.style.display = "none"; // Hide the instruction
            isCalm = true; // Set Elliot to calm
            document.body.style.backgroundColor = "black";
            setTimeout(() => {animationContainer.style.opacity = "0"; }, 500); // Fade out the animation container
            setTimeout(() => { document.getElementById("calm-message").style.opacity = "1"; }, 1000);
            setTimeout(() =>  document.getElementById("calm-message").style.opacity = "0", 3000);
            setTimeout(() =>  goNext2(), 4000);
        }
    }
});
</script>
</body>
</html>